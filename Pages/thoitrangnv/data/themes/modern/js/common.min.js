var TopMenu = {
    urlRequest: "",
    loading: false,
    liCssActive: "nav-li-hover",
    aCssActive: "nav-hover",
    init: function () {
        for (var a = 0; a < NUKEVIET_MENU.MAINMENU.length; a++) {
            zm("#" + NUKEVIET_MENU.MAINMENU[a]).hover(function () {
                TopMenu.hoverMenu(this)
            });
            
            var position = $("#" + NUKEVIET_MENU.MAINMENU[a]).position();
            var id = $("#" + NUKEVIET_MENU.MAINMENU[a]).attr("idsub");
            if( $("#_sub" + id ) ){
                $("#_sub" + id ).css( "left", position.left );
                var total = $("#_sub" + id + " div div ul li").length;
                
                $("#_sub" + id + " div div ul li").each(function() {
                   if( $(this).attr("class") == "selected"){
                    $(this).attr('class', '' );
                    $("#" + NUKEVIET_MENU.MAINMENU[a] ).addClass("selected");
                } 
                });
                
                if( total < 10){
                    $("#_sub" + id ).css( "width", 190 );
                    $("#_sub" + id + " div" ).removeClass('songcol_list')   
                    $("#_sub" + id + " div div" ).removeClass('subinner_item')
                    $("#_sub" + id + " div div" ).css( "width", 190 );   
                }
            }
            
            
            zm("#" + NUKEVIET_MENU.MAINMENU[a]).mouseleave(function () {
                TopMenu.outMenu(this)
            });
            var e = zm("#" + NUKEVIET_MENU.MAINMENU[a]).attr("match");
            if (e) {
                var c = new RegExp(e, "i");
                var b = location.pathname.split("/");
                if (b[1] && c.test(b[1])) {
                    zm("#" + NUKEVIET_MENU.MAINMENU[a]).addClass(TopMenu.liCssActive)
                }
            }
        }
    },
    hoverMenu: function (b) {
        if (NUKEVIET_MENU.IEVERSION < 7) {
            zm(b).addClass(TopMenu.liCssActive)
        }
        var a = zm(b).attr("rel");
        zm("#" + a).removeClass("none");
    },
    outMenu: function (b) {
        var a = zm(b).attr("rel");
        zm("#" + a).addClass("none");
        if (zm("#" + a).size()) {
            zm("#" + a).removeClass(TopMenu.aCssActive)
        }
        if (NUKEVIET_MENU.IEVERSION < 7) {
            zm(b).removeClass(TopMenu.liCssActive);
            TopMenu.hideMenu(a)
        }
    },
    hideMenu: function (a) {
        zm("#" + a + "Items").addClass(Common.cssHidden)
    },
};
TopMenu.init();